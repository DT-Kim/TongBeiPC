<!DOCTYPE html>
<html lang="en">

	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>广告轮播 - 铜呗后台管理系统</title>

		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="assets/font-awesome/4.5.0/css/font-awesome.min.css" />

		<!-- page specific plugin styles -->

		<!--tree-->
		<link href="assets/tree/css/ligerui-tree.css" rel="stylesheet" type="text/css" />

		<!-- text fonts -->
		<link rel="stylesheet" href="assets/css/fonts.googleapis.com.css" />

		<!-- ace styles -->
		<link rel="stylesheet" href="assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
		<link rel="stylesheet" href="assets/css/ace-skins.min.css" />
		<link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
		<link rel="stylesheet" href="assets/css/self/buton.css" />
		<!--[if lte IE 9]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->
		<script src="assets/js/ace-extra.min.js"></script>

		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

		<!--[if lte IE 8]>
		<script src="assets/js/html5shiv.min.js"></script>
		<script src="assets/js/respond.min.js"></script>
		<![endif]-->
		<style type="text/css">
			.DateTable {
				float: left;
			}
			.tupian
			{
				width: auto;
				height: 350px;
			}
			
		</style>
	</head>
	<body class="no-skin">
		<!--top part begin-->
		<div id="top"></div>
		<!--top part end-->
		<div class="main-container ace-save-state" id="main-container">
			<!--left tree begin-->
			<div id="leftTree" class="sidebar responsive ace-save-state"></div>
			<!--left tree end-->
			<div class="main-content">
				<div class="widget-main padding-24">
    			    <span style="font-size: 22px;"> 广告轮播</span>
                    <div class="hr hr8 hr-double hr-dotted"></div>
                    <div class="col-xs-5">
                        <button class="btn btn-success" id="NewAds">新建节点</button>
                        <button class="btn btn-danger" onclick="DelAds()">删除节点</button>
                    </div>
                    <div class="col-xs-7">
                        <button class="btn btn-primary" href="#ads-mes" role="button" data-toggle="modal">修改节点属性</button>
                    </div>
    				<div class="col-xs-5">
    				    <div class="widget-box">
        					<div class="widget-header widget-header-flat">
                                <h4 class="widget-title smaller">
                                    <span> 广告设置 </span>
                                </h4>
                            </div>
        					<div class="widget-body">
        					    <div class="widget-main">
            						<table id="dynamic-table" class="table table-striped table-bordered table-hover">
            							<thead>
            								<tr>
            									<th>文字说明</th>
            									<th>位置</th>
            									<th>是否热门</th>
            								</tr>
            							</thead>
            							<tbody></tbody>
            						</table>
        					   </div>
        					</div>
        			    </div>
    				</div>
    				<div class="col-xs-7">
                        <div class="widget-box">
                            <div class="widget-header widget-header-flat">
                                <h4 class="widget-title smaller">
                                    <span> 广告节点属性 </span>
                                </h4>
                            </div>
                            <div class="widget-body">
                                <div class="widget-main">
                                    <div class="tab-content">
                                        <img width="426px" height="200px" id="ImgSel"/>
                                        <br /><br />
                                        <div class="profile-user-info profile-user-info-striped">
                                            <div class="profile-info-row">
                                            	<div class="profile-info-name">图片状态 </div>
                                            	<div class="profile-info-value">
                                                <div class="switch">
													<div class="btn_fath clearfix on" onclick="toogle(this)">
												    	<div class="move" data-state="on"></div>
												    	<div class="btnSwitch btn1">ON</div>
												    	<div class="btnSwitch btn2 ">OFF</div>
												 </div>
												</div>
                                            </div>
                                        </div>
                                        </div>
                                        <div class="profile-user-info profile-user-info-striped">
                                            <div class="profile-info-row">
                                                <div class="profile-info-name"> 图片说明 </div>
                                                <div class="profile-info-value">
                                                    <span class="editable" id="ImgElse">  </span>
                                                </div>
                                            </div>
                                             
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    			</div>
			</div>
			
			<!--model page begin-->
			<div id="model-ads"></div>
			<!--model page end-->
			
			<!--footer part begin-->
            <div id="footer" class="footer"></div>
            <!--footer part end-->

			<script src="assets/js/jquery-2.1.4.min.js"></script>
			<script src="assets/js/bootstrap.min.js"></script>
			<!--dataTable-->
			<script src="assets/js/jquery.dataTables.min.js"></script>
			<script src="assets/js/jquery.dataTables.bootstrap.min.js"></script>
			<script src="assets/js/dataTables.buttons.min.js"></script>
			<script src="assets/js/dataTables.select.min.js"></script>
			<!--ace-->
			<script src="assets/js/ace-elements.min.js"></script>
			<script src="assets/js/ace.min.js"></script>
			<!--self-->
			<script src="assets/js/self/ActionAds.js"></script>
			
		 
        
			<script type="text/javascript">
				/*
				 * INI Page
				 */
				$("#top").load("pageTop.html")
				$("#leftTree").load("pageLeft.html")
				$("#footer").load("pageFoot.html")
				$('#model-ads').load('model_ads.html')
				function toogle(th){
				  var ele = $(th).children(".move");
				  if(ele.attr("data-state") == "on"){
				    ele.animate({left: "0"}, 300, function(){
				      ele.attr("data-state", "off");
				      alert("关闭图片成功！");
				    });
				    $(th).removeClass("on").addClass("off");
				  }else if(ele.attr("data-state") == "off"){
				    ele.animate({left: '40px'}, 300, function(){
				      $(this).attr("data-state", "on");
				      alert("显示图片成功！");
				    });
				    $(th).removeClass("off").addClass("on");
				  }
				}
				jQuery(function($) {
					/*
					 * INI DataTable
					 */
					
					tabMesSimple = $('#dynamic-table').DataTable({
    	                ajax:'php/TableShowAds.php',
    	                columns:[
    	                    {"data":'else'},
    	                    {"data":'place'},
    	                    {"data":'status'},
    	                ],
						oLanguage: {
							sLengthMenu: "显示 _MENU_ 条数据",
						},
						"processing": true,
						"aaSorting": [],
						"aoColumnDefs": [{
							'bSortable': false,
							'aTargets': [0]
						}],
					});
//					 
				})
				//ACTION
                $('#dynamic-table tbody').on('click', 'tr', function () {
                    if ($(this).hasClass('selected')) {
                        $(this).removeClass('selected');
                    }
                    else {
                        tabMesSimple.$('tr.selected').removeClass('selected');
                        $(this).addClass('selected');
                    }
                    try{
                        
                        //右边信息框
                        $('#MesId').attr('value',tabMesSimple.row('.selected').data().id)
                        $('#ImgSel').attr('src',tabMesSimple.row('.selected').data().url)
                        $('#ImgElse').text(tabMesSimple.row('.selected').data().else)
                        //模态框信息显示
                            //清空
                        $("#adsMes").val('')
                        $('#AdsImg').val('')
                        $('#ImgShow').attr('src','')
                        $('#AdsStaOp').text('')
                            //显示
                        $('#adsMes').val(tabMesSimple.row('.selected').data().else)
                        $('#AdsStaOp').text(tabMesSimple.row('.selected').data().status)
                        $('#ImgShow').attr('src',tabMesSimple.row('.selected').data().url)
//                      $('#AdsImg').attr('src',tabMesSimple.row('.selected').data().url)
                    }catch(e){
                        console.log(e)
                    }
                })
                //新建广告节点
                $('#NewAds').on('click',function(){
                    //清空模态框中的数据
                    $("#adsMes").val('')
                    $('#AdsImg').val('')
                    $('#ImgShow').attr('src','')
                    $('#AdsStaOp').text('')
                    //显示模态框
                    $('#ads-mes').modal('show')
                })
			</script>
	</body>

</html>